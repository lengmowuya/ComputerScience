# 一.HTTP协议和TCP协议

前端程序员理论上必须了解和熟悉的基础知识.

HTTP全称是超文本传输协议,构建于TCP之上,属于应用层协议

### 发送时的各协议职责

HTTP协议的职责:生成针对目标Web服务器的HTTP请求报文.

TCP协议的职责:将HTTP请求报文分割成报文段,把每个报文段可靠地传输给对方.

IP协议的职责:搜索对方的地址,一边中转一边传送.

### 接收时的各协议职责

HTTP协议的职责:对Web服务器请求的内容的处理.

TCP协议职责:从对方那接收到的报文段.

### 长连接

请求要传输多个图片,如果每个图片都单独通信,则会产生大量通信开销.

而建立一个长连接,不需要每次都断开.

### 管道化

管道化是一个概念,而长连接是管道化的一种具体实现.

### URI和URL

URI是统一资源标识符,在某个规则下能把这个资源独一无二的标示出来,比如人的身份证号.

URL是统一资源定位符,表示资源的地点,URL是使用浏览器访问WEB页面时需要输入的网页地址.

URL具体组成:

`http://user:pwd@www.baidu.com:80/dist/index.html?uid=1#ch=1`

1. 协议类型
2. 登录信息
3. 服务器地址
4. 服务器端口号
5. 带层次的文件路径
6. 查询字符串
7. 片段标识符


# 二.HTTP模块

请求的一方叫客户端,响应的一方叫服务器端,通过请求和响应达成通信.

HTTP是一种不保存状态的协议.

### 请求报文

**请求报文包含结构**:

1. *请求行(主要方法,例如GET+协议/版本号+URL)*
2. 请求头
3. 请求体

**主要方法有**:

1. *GET 获取资源*
2. POST 向服务器端发送数据,传输实体主题
3. PUT 传输文件
4. HEAD 获取报文首部
5. DELETE 删除文件
6. OPTIONS 询问支持的方法
7. TRACE 追踪路径

路径追踪是防止别人设置代理服务器

### 响应报文

响应报文包含结构:

1. *响应行*
2. 响应头
3. 响应体

### 状态码

状态码负责表示客户端请求的返回结果,标记服务器端是否正常,通知出现的错误.

**状态码类别**:

* 1XX:信息性状态码
* 2XX:成功状态码
* 3XX:重定向
* 4XX:客户端错误状态码
* 5XX:服务器错误状态码

301:永久重定向

401:需要认证

403:服务器拒绝访问对应的资源

404:服务器上无法找到资源

500:服务器故障

503:服务器处于超负载或正在停机维护


### 创建简单HTTP服务器

```javascript
// 1.引入http模块
let http = require('http');

// 2.创建一个web服务器
let server = http.createServer((req,res)=>{
    res.end('Hello,World!');
})

// 3.监听服务
server.listen(8080,'127.0.0.1',()=>{
    console.log('8080端口服务已启动');
});
```
